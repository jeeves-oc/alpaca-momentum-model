# 001 — GitHub Pages Static Dashboard Reproducing Portfolio Visualizer Momentum Report

## Status: READY

## Summary
Build a Python-generated static dashboard, hosted on GitHub Pages, that reproduces the style, calculations, and core outputs of the attached Portfolio Visualizer (PV) momentum model report for the strategy universe and period specified below.

The implementation must support monthly automated refresh and Discord notifications after successful refresh.

---

## Objectives

1. Reproduce PV-style strategy simulation and report outputs (metrics, tables, and graphs) with high fidelity.
2. Emphasize CAGR and drawdown visibility in both summary and visualization sections.
3. Publish a static site to GitHub Pages with dark/light theme support.
4. Auto-refresh monthly via GitHub Actions and notify Discord on successful update.

---

## Required Strategy / Backtest Specification

### Time and price windows
- Price history fetch must start no later than **2006-12-31** (to warm up indicators/lookbacks).
- Simulation window must be exactly **2007-01-01 through 2026-01-31** (inclusive, trading-calendar aware).
- Use **adjusted prices** (split/dividend adjusted) for all return, momentum, and SMA calculations.

### Universe
- Tradable assets: `SPY`, `QQQ`, `TLT`, `DBC`, `GLD`

### Rebalance and signal rules
- Rebalance frequency: **monthly**, at **month-end close**.
- Ranking signal: **6-month momentum**, defined as total return over approximately 6 months using **126 trading days** lookback (PV-comparable; parameterized internally, default 126).
- Select the **top 3 assets** by momentum score at each rebalance.
- Trend filter: selected assets must pass **135-trading-day SMA filter** (`price > SMA135`) at rebalance.
- Allocation model:
  - Portfolio is divided into 3 equal sleeves (33.333…% each).
  - Each sleeve corresponds to one selected ranked asset.
  - If selected asset fails SMA filter, that sleeve goes to cash.
  - If all selected assets fail filter, portfolio is 100% cash.

### Cash and benchmark assumptions
- Cash return modeled per attached report assumptions.
- Default fallback if unspecified by report: **0.00% annualized cash return**.
- Benchmarks must include and match report framing, including:
  - **VFINX** benchmark series
  - **Equal-weight portfolio** benchmark from universe assets
- Handle `DBC` inception/availability constraints explicitly:
  - No look-ahead.
  - No synthetic pre-inception prices unless explicitly configured and disclosed.
  - During unavailable periods, strategy logic must follow an explicit, documented policy (default: exclude unavailable symbols from eligible ranking set at that date).

---

## Reporting Requirements (PV-style)

Generate a static report/dashboard including at minimum:

1. **Performance Summary**
   - CAGR (prominently displayed)
   - Annualized volatility
   - Sharpe ratio (define risk-free assumption used)
   - Sortino ratio
   - Calmar ratio
   - Max drawdown (prominently displayed)
   - Best/Worst year
   - Win rate (up-period ratio)

2. **Growth and Drawdown Visuals**
   - Equity curve (strategy + benchmarks)
   - Drawdown curve (strategy + benchmarks)
   - Optional rolling return view if included in PV reference

3. **Tabular Breakdowns**
   - Calendar-year returns table
   - Monthly returns heatmap/table
   - Holdings/weights timeline (rebalance history)
   - Rebalance log with selected top-3, SMA pass/fail, and resulting cash sleeves

4. **Benchmark Comparison Section**
   - Side-by-side metrics table for strategy and each benchmark
   - Relative performance chart (optional but preferred)

5. **Metadata / Auditability**
   - Data source disclosure
   - Calculation definitions (momentum, SMA, rebalance timing)
   - Simulation start/end dates
   - Last updated timestamp (UTC and local)

---

## UI/UX Requirements

- Fully static site output (HTML/CSS/JS artifacts generated by Python build step).
- GitHub Pages compatible structure (e.g., `docs/` or artifact deploy action).
- Support **dark mode and light mode** theme toggle.
- Add a visible **notification banner** on page indicating latest refresh status/date.
- Dashboard should be legible on desktop and reasonable on mobile widths.

---

## Automation & Delivery Requirements

### GitHub Actions monthly refresh
- Add a scheduled workflow to refresh data and rebuild dashboard monthly.
- Workflow must:
  1. Run backtest generation pipeline.
  2. Build/publish static site to GitHub Pages.
  3. Update timestamp and notification banner content.
  4. Post Discord notification on successful monthly refresh.

### Discord notification
- On successful scheduled refresh, send concise success message containing:
  - Project/dashboard name
  - Simulation end date included in report
  - Deploy URL
  - Build timestamp
- Webhook-based implementation is acceptable.

---

## Implementation Phases

### Phase 1 — Data & Simulation Engine
- Build reproducible data ingestion with adjusted prices.
- Implement date-window controls and trading-calendar-aware rebalance dates.
- Implement momentum ranker, top-3 selector, SMA135 filter, and cash sleeve logic.
- Implement DBC availability handling policy and tests.

### Phase 2 — Metrics & Benchmark Layer
- Implement report metrics with documented formulas.
- Add benchmarks (VFINX and equal-weight) and ensure aligned date handling.
- Validate metric parity against PV report snapshots/tolerances.

### Phase 3 — Static Report Generation
- Generate PV-style charts/tables and summary panels.
- Implement dark/light theme and responsive layout.
- Add timestamp + refresh notification banner.

### Phase 4 — CI/CD & Hosting
- Configure GitHub Actions monthly schedule.
- Configure Pages deployment.
- Add Discord success notification step.

### Phase 5 — Verification & Hardening
- Add regression tests for strategy logic and key metrics.
- Add smoke test for report build artifact completeness.
- Add runbook/docs for local and CI execution.

---

## Acceptance Criteria

- [ ] Simulation uses adjusted prices with warmup starting at/before 2006-12-31.
- [ ] Simulation period is exactly 2007-01-01 to 2026-01-31.
- [ ] Monthly month-end-close rebalance implemented correctly.
- [ ] Top-3 by 6-month momentum and SMA135 filter with sleeve-to-cash behavior implemented.
- [ ] Cash return assumption matches report or defaults to 0% with explicit disclosure.
- [ ] DBC availability constraints handled without look-ahead and with documented policy.
- [ ] Benchmarks include VFINX and equal-weight portfolio, aligned to report period.
- [ ] Dashboard includes PV-style metrics, tables, and charts with clear CAGR and drawdown emphasis.
- [ ] Dark/light theme toggle works in final static site.
- [ ] Updated timestamp and visible refresh notification banner are rendered on the dashboard.
- [ ] GitHub Actions monthly job rebuilds and republishes dashboard to GitHub Pages.
- [ ] Successful monthly job posts Discord notification with deploy details.
- [ ] Documentation explains formulas, assumptions, data source, and execution steps.

---

## Coherence Checks (must pass before marking COMPLETE)

1. **Date coherence:** Warmup window supports first valid rebalance calculations in early 2007.
2. **Signal coherence:** Momentum lookback and SMA windows use only data available at rebalance close.
3. **Availability coherence:** Asset eligibility at each rebalance is based only on data available on that date.
4. **Benchmark coherence:** Benchmark return series share comparable date alignment and compounding basis.
5. **Report coherence:** Every displayed metric has a documented formula and consistent annualization basis.
6. **Automation coherence:** Scheduled run updates content, deploys successfully, then notifies Discord.

---

## Out of Scope (for this spec)

- Live trading execution via broker APIs.
- Intraday rebalancing or non-monthly cadence.
- Optimization search over parameter grids (unless added in future spec).

---

## Suggested Artifacts (non-binding)

- `dashboard/` or `site/` Python package for report generation
- `data/` cache for fetched prices
- `docs/` built static site output (if using docs deploy model)
- `.github/workflows/monthly-refresh.yml`
- `config/report.yml` for assumptions and presentation settings

---

## Notes for Ralph Loop

- This is the highest-priority starting spec and should be implemented before lower-numbered additions.
- If implementation becomes too broad, split into `002+` child specs by phase while preserving this file as umbrella.

NR_OF_TRIES: 0
